<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Expense Tracker</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<h2>Expense Tracker</h2>

<input id="date" type="date">
<input id="enteredBy" placeholder="Entered By">

<select id="category">
<option>Food</option><option>Fast Food</option><option>Drinks</option>
<option>Fuel</option><option>Cab</option><option>Hotel</option><option>Others</option>
</select>

<select id="location">
<option>UP</option><option>DOWN</option><option>PrayagRaj</option>
<option>Ayodhya</option><option>Varanasi</option>
<option>Chtrakoot</option><option>Ujjain (Indore)</option><option>Others</option>
</select>

<input id="desc" placeholder="Description">
<input id="amount" type="number">
<input id="invoice" type="file">
<input type="hidden" id="expenseId">

<button onclick="submitExpense()">Save</button>

<script>
const API = "https://script.google.com/macros/s/AKfycbxTEUuXm_thvDv9BbKbfRWjPRt7rFxIPiVlGXC7_FqjD24DFvOh0fNsTeIPPXoutqpqcQ/exec";

function submitExpense() {
  const data = {
    action: expenseId.value ? "EDIT" : "ADD",
    expenseId: expenseId.value,
    date: date.value,
    enteredBy: enteredBy.value,
    category: category.value,
    location: location.value,
    description: desc.value,
    amount: amount.value
  };

  const file = invoice.files[0];
  if (file) {
    const r = new FileReader();
    r.onload = () => { data.invoiceBase64 = r.result; send(data); };
    r.readAsDataURL(file);
  } else send(data);
}

function send(data) {
  fetch(API, { method: "POST", body: JSON.stringify(data) })
    .then(r => r.text())
    .then(t => alert(t))
    .catch(e => alert(e));
}
</script>

</body>
</html>
